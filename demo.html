<!DOCTYPE html>

<html>

    <head>
        <meta charset="UTF-8" />
        <title>SnappyCanvas demo</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <style>
            html, body {
                margin: 0;
                padding: 0;
                background: #f1f1f1;
                color: #333;
                text-align: center;
                font-family: sans-serif;
            }
            canvas {
                vertical-align: middle;
                background: #fff;
                margin: 30px;
                border: #ccc solid 1px;
            }
        </style>
    </head>

    <body>
        <script src="./dist/snappy-canvas.js"></script>
        <script>
            var canvas = new SnappyCanvas({
                width: 800,
                height: 600,
                scale: 1,
                translationX: 0,
                translationY: 0,
                scaleLineWidth: 0,
                resizeCanvas: 0
            });

            document.body.appendChild(canvas);

            var ctx = canvas.getContext("2d");

            ctx.strokeRect(10, 10, 50, 50);
            ctx.fillRect(70, 10, 50, 50);

            ctx.strokeStyle = "blue";
            ctx.fillStyle = "red";

            ctx.beginPath();
            ctx.moveTo(130, 10);
            ctx.lineTo(180, 10);
            ctx.lineTo(180, 60);
            ctx.lineTo(130, 60);
            ctx.closePath();
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(190, 10);
            ctx.lineTo(240, 10);
            ctx.lineTo(240, 60);
            ctx.lineTo(190, 60);
            ctx.closePath();
            ctx.fill();

            ctx.strokeStyle = "black";
            ctx.fillStyle = "black";

            ctx.lineWidth = 4;
            ctx.strokeRect(10, 70, 50, 50);

            ctx.render();

            // Additional code for live translation & scaling
            var _prevX;
            var _prevY;
            var _isDragging = false;

            canvas.onwheel = function(event) {
                if (event.deltaY <= 0) {
                    canvas.scale += 0.1;
                } else {
                    canvas.scale -= 0.1;
                }
            };

            canvas.onmousedown = function() {
                _isDragging = true;
            };

            document.onmouseup = function() {
                _isDragging = false;
            };

            document.onmousemove = function(event) {
                if (_isDragging) {
                    var deltaX = event.pageX - _prevX;
                    var deltaY = event.pageY - _prevY;
                    canvas.translationX += deltaX / canvas.scale;
                    canvas.translationY += deltaY / canvas.scale;
                }
                _prevX = event.pageX;
                _prevY = event.pageY;
            };

        </script>
    </body>

</html>
